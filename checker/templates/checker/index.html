{% extends 'checker/base.html' %}

{% block content %}
<div class="search-container">
    <form method="post">
        {% csrf_token %}
        {{ form.url }}
        <div class="buttons">
            <button type="submit" class="btn">Check Status</button>
        </div>
    </form>
</div>

{% if result %}
<div class="result {% if result.status == 'up' %}success{% else %}error{% endif %}">
    <h3 class="{% if result.status == 'up' %}status-up{% else %}status-down{% endif %}">
        {% if result.status == 'up' %}
            Website is UP
        {% else %}
            Website is DOWN
        {% endif %}
    </h3>
    
    <div class="info"><strong>URL:</strong> {{ result.url }}</div>
    
    {% if result.status_code %}
        <div class="info"><strong>Status Code:</strong> {{ result.status_code }}</div>
    {% endif %}
    
    {% if result.response_time %}
        <div class="info"><strong>Response Time:</strong> {{ result.response_time }} ms</div>
    {% endif %}
    
    {% if result.page_title %}
        <div class="info"><strong>Page Title:</strong> {{ result.page_title }}</div>
    {% endif %}
    
    {% if result.error_message %}
        <div class="info" style="color: #ea4335;"><strong>Error:</strong> {{ result.error_message }}</div>
    {% endif %}
    
    {% if result.status == 'up' and result.screenshot_url %}
    <div class="screenshot">
        <img src="{{ result.screenshot_url }}" alt="Screenshot of {{ result.url }}" loading="lazy">
    </div>
    {% endif %}
</div>
{% endif %}
{% endblock %}