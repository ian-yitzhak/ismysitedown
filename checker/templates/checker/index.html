{% extends 'checker/base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card status-card">
            <div class="card-body">
                <h1 class="main-title">Website Status Checker</h1>
                
                <form method="post">
                    {% csrf_token %}
                    <div class="input-group">
                        {{ form.url }}
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-check">Check Status</button>
                    </div>
                </form>

                {% if result %}
                <div class="result-card card {% if result.status == 'up' %}result-up{% else %}result-down{% endif %}">
                    <div class="result-header {% if result.status == 'up' %}success{% else %}danger{% endif %}">
                        {% if result.status == 'up' %}Website is UP{% else %}Website is DOWN{% endif %}
                    </div>
                    <div class="result-body">
                        <div class="info-item">
                            <span class="info-label">URL:</span>
                            <span class="info-value">{{ result.url }}</span>
                        </div>

                        {% if result.response_time %}
                        <div class="info-item">
                            <span class="info-label">Response Time:</span>
                            <span class="badge {% if result.response_time < 1000 %}badge-success{% elif result.response_time < 3000 %}badge-warning{% else %}badge-danger{% endif %}">
                                {{ result.response_time }}ms
                            </span>
                        </div>
                        {% endif %}

                        {% if result.page_title %}
                        <div class="info-item">
                            <span class="info-label">Title:</span>
                            <span class="info-value">{{ result.page_title }}</span>
                        </div>
                        {% endif %}

                        {% if result.status_code %}
                        <div class="info-item">
                            <span class="info-label">Status Code:</span>
                            <span class="badge badge-info">{{ result.status_code }}</span>
                        </div>
                        {% endif %}

                        {% if result.error_message %}
                        <div class="alert alert-danger">
                            <strong>Error:</strong> {{ result.error_message }}
                        </div>
                        {% endif %}

                        {% if result.screenshot_url and result.status == 'up' %}
                        <div class="screenshot-container">
                            <img src="{{ result.screenshot_url }}" class="img-fluid rounded shadow" alt="Website Screenshot">
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}